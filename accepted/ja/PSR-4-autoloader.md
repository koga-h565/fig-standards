# オートローダー

原文書内で記載されている "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY" 及び "OPTIONAL" は、[RFC 2119](http://tools.ietf.org/html/rfc2119)で説明される趣旨で解釈してください。


## 1. 概要

このPSRは、ファイルPathからクラスを[オートローディング]する仕様について説明します。これは完全に相互運用可能であり、[PSR-0]を含む任意の他のオートロード仕様に加えて使用することができます。このPSRでは仕様に応じてオートロードされるファイルの配置場所についても説明します。


## 2. 仕様

1. 「クラス」という語は、クラス、インタフェース、トレイト、および他の類似の構造体を指します。

2. 完全修飾クラス名は下記のような形式になります。

        \<名前空間名>(\<サブ名前空間名>)\*\<クラス名>

    1. 完全修飾クラス名は、「ベンダー名前空間」として知られるトップレベルの名前空間名を持っている必要があります。

    2. 完全修飾クラス名は、1つ以上のサブ名前空間名を持つことができます。

    3. 完全修飾クラス名の末尾はクラス名でなければなりません。

    4. アンダースコアは、完全修飾クラス名のいずれの部分にあっても特別な意味を持ちません。

    5. 完全修飾クラス名でのアルファベット文字列における小文字と大文字の組み合わせは自由です。

    6. すべてのクラス名は、大文字と小文字を区別されなければなりません。

3. 完全修飾クラス名に対応するファイルをロードするとき ...

    1. 完全修飾クラス名のうち、先頭の名前空間の区切りを含まないものとして、先頭から始まる 1 つ以上の連続した名前空間名とサブ名前空間名 (これを 「名前空間プレフィックス」 という) は、少なくとも 1 つの 「ベースディレクトリ」 に相当します。

    2. 「名前空間プレフィックス」の後に続くサブ名前空間名は、「ベースディレクトリ」 内のサブディレクトリに相当し、名前空間セパレータはディレクトリセパレータに相当します。サブディレクトリ名は、サブ名前空間名の小文字・大文字と一致していなければなりません。

    3. 末尾のクラス名は`.php`で終わるファイル名に対応しています。ファイル名は、末尾クラス名の小文字・大文字と一致していなければなりません。

4. オートローダの実装は、例外をスローしてはいけません、任意レベルのエラーも発生させてはならず、またその値を返すべきでもありません。


## 3. 例

下記の表は、完全修飾クラス名，名前空間プレフィックス，ベースディレクトリに対応するファイルPathとの関係を示したものになります。

| 完全修飾クラス名    | 名前空間プレフィックス   | ベースディレクトリ           | ファイルPath
| ----------------------------- |--------------------|--------------------------|-------------------------------------------
| \Acme\Log\Writer\File_Writer  | Acme\Log\Writer    | ./acme-log-writer/lib/   | ./acme-log-writer/lib/File_Writer.php
| \Aura\Web\Response\Status     | Aura\Web           | /path/to/aura-web/src/   | /path/to/aura-web/src/Response/Status.php
| \Symfony\Core\Request         | Symfony\Core       | ./vendor/Symfony/Core/   | ./vendor/Symfony/Core/Request.php
| \Zend\Acl                     | Zend               | /usr/includes/Zend/      | /usr/includes/Zend/Acl.php

仕様に準拠したオートローダーの実装例については、[examples file][]を参照してください。なお実装例は、本明細書の一部とみなさず、いつでも変更することがあります。

[オートローディング]: http://php.net/autoload
[PSR-0]: https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md
[examples file]: https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-4-autoloader-examples.md
